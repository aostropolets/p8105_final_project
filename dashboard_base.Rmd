---
title: "SRTR Dashboard"

output: 
  flexdashboard::flex_dashboard:
    theme: yeti
    orientation: columns
    vertical_layout: fill
    include:
      after_body: footer.html
      fig_caption: true
---

```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(viridis)
library(purrr)
library(DT)
library(plotly)
library(magick)
library(bslib)
library(patchwork)
# library(shiny)

# Multiple plot function
#
# ggplot objects can be passed in ..., or to plotlist (as a list of ggplot objects)
# - cols:   Number of columns in layout
# - layout: A matrix specifying the layout. If present, 'cols' is ignored.
#
# If the layout is something like matrix(c(1,2,3,3), nrow=2, byrow=TRUE),
# then plot 1 will go in the upper left, 2 will go in the upper right, and
# 3 will go all the way across the bottom.
#
multiplot <- function(..., plotlist=NULL, file, cols=1, layout=NULL) {
  library(grid)

  # Make a list from the ... arguments and plotlist
  plots <- c(list(...), plotlist)

  numPlots = length(plots)

  # If layout is NULL, then use 'cols' to determine layout
  if (is.null(layout)) {
    # Make the panel
    # ncol: Number of columns of plots
    # nrow: Number of rows needed, calculated from # of cols
    layout <- matrix(seq(1, cols * ceiling(numPlots/cols)),
                    ncol = cols, nrow = ceiling(numPlots/cols))
  }

 if (numPlots==1) {
    print(plots[[1]])

  } else {
    # Set up the page
    grid.newpage()
    pushViewport(viewport(layout = grid.layout(nrow(layout), ncol(layout))))

    # Make each plot, in the correct location
    for (i in 1:numPlots) {
      # Get the i,j matrix positions of the regions that contain this subplot
      matchidx <- as.data.frame(which(layout == i, arr.ind = TRUE))

      print(plots[[i]], vp = viewport(layout.pos.row = matchidx$row,
                                      layout.pos.col = matchidx$col))
    }
  }
}


#------------------ Parameters ------------------
# Set colors
# https://www.w3.org/TR/css-color-3/#svg-color
color1 = "purple"
color2 = RColorBrewer::brewer.pal(9, "PuRd")[7]
color3  = "#1f77b4"
color4 = "forestgreen"
color5 = "#660708"
color6 = "red"
color7 = "#ba181b"
color8 = "#e5383b"
color9 = "#FDBBBC"


suffix = list("age","gender","demographics", "blood_type")

for (i in suffix){
  data_path = "./data/"   # path to the data
  files = dir(data_path, 
              pattern = paste0("csrs_final_tables_2006_[A-Z][A-Z]_", i,".csv"))
  assign(paste0("df_all_", i),
         files %>%
           map(~ read_csv(file.path(data_path, .))%>%
                 mutate(org = str_replace(org, "HR", "Heart"),
                        org = str_replace(org, "HL", "Heart-Lung"),
                        org = str_replace(org, "IN", "Intestine"),
                        org = str_replace(org, "KI", "Kidney"),
                        org = str_replace(org, "KP", "Kidney-Pancreas"),
                        org = str_replace(org, "LI", "Liver"),
                        org = str_replace(org, "LU", "Lung"),
                        org = str_replace(org, "PA", "Pancreas"))) %>%
           reduce(rbind))
  }

organ_race = df_all_demographics %>% distinct(org) %>% pull()
organ_age = df_all_age %>% distinct(org) %>% pull()
organ_gender = df_all_gender %>% distinct(org) %>% pull()
organ_blood_type = df_all_blood_type %>% distinct(org) %>% pull()

no_transplant_centers = 
  df_all_demographics %>% 
  distinct(entire_name) %>% 
  count() %>% 
  pull()

avg_asian = 
  df_all_demographics %>% 
  filter(race_category == 'asian_allc2') %>% 
  select(race_category_percent)%>% 
  pull() %>%
  mean(na.rm = TRUE) %>%
  round(.,1)

avg_black = 
  df_all_demographics %>% 
  filter(race_category == 'african_american_allc2') %>% 
  select(race_category_percent)%>% 
  pull() %>%
  mean(na.rm = TRUE) %>%
  round(.,1)

avg_latino = 
  df_all_demographics %>% 
  filter(race_category == 'hispanic_latino_allc2') %>% 
  select(race_category_percent)%>% 
  pull() %>%
  mean(na.rm = TRUE) %>%
  round(.,1)

avg_white = 
  df_all_demographics %>% 
  filter(race_category == 'white_allc2') %>% 
  select(race_category_percent)%>% 
  pull() %>%
  mean(na.rm = TRUE) %>%
  round(.,1)

avg_other = 
  df_all_demographics %>% 
  filter(race_category == 'race_other_allc2') %>% 
  select(race_category_percent)%>% 
  pull() %>%
  mean(na.rm = TRUE) %>%
  round(.,1)

avg_unknown = 
  df_all_demographics %>% 
  filter(race_category == 'race_unknown_allc2') %>% 
  select(race_category_percent)%>% 
  pull() %>%
  mean(na.rm = TRUE) %>%
  round(.,1)

avg_unknown_other = 100 - sum(avg_asian, avg_black, avg_latino, avg_white)
  # df_all_demographics %>% 
  # filter(race_category == 'race_unknown_allc2' | race_category == 'race_other_allc2') %>% 
  # select(race_category_percent)%>% 
  # pull() %>%
  # mean(na.rm = TRUE) %>%
  # round(.,1)
```

<!-- Dashboard  -->
<!-- ======================================================================= -->
Column { data-width=175 }
-----------------------------------------------------------------------

### Transplant Centers {.value-box}
```{r}
valueBox(value = paste(format(no_transplant_centers, big.mark = ","), "", sep = " "), 
         caption = "Total transplant centers", 
         icon = "fas fa-hospital", 
         color = color1)
```

### Number of Recipients {.value-box}
```{r}
valueBox(value = paste(format(avg_unknown, big.mark = ","), "", sep = " "), 
         caption = "Number of transplant recipients", 
         icon = "fas fa-users", 
         color = color2)
```

### Percent Asian {.value-box}
```{r}
valueBox(value = paste(format(avg_asian, big.mark = ","), "%", sep = " "), 
         caption = paste0("Percent of recipients who identify as",'<br>',"Asian/Pacific Islander"), 
         icon = "fas fa-procedures", 
         color = color3)
```

### Percent Black {.value-box}
```{r}
valueBox(value = paste(format(avg_black, big.mark = ","), "%", sep = " "), 
         caption = paste0("Percent of recipients who identify as",'<br>',"Black/African American"), 
         icon = "fas fa-procedures", 
         color = color4)
```

### Percent Latino {.value-box}
```{r}
valueBox(value = paste(format(avg_latino, big.mark = ","), "%", sep = " "), 
         caption = paste0("Percent of recipients who identify as",'<br>',"Latinx/Hispanic"), 
         icon = "fas fa-procedures", 
         color = color6)
```

### Percent White {.value-box}
```{r}
valueBox(value = paste(format(avg_white, big.mark = ","), "%", sep = " "), 
         caption = paste0("Percent of recipients who identify as",'<br>',"White/Caucasian"), 
         icon = "fas fa-procedures", 
         color = color9)
```

### Percent Other {.value-box}
```{r}
valueBox(value = paste(format(avg_other, big.mark = ","), "%", sep = " "), 
         caption = "Percent of recipients of other race/ethnicity", 
         icon = "fas fa-procedures", 
         color = "yellow")
```

<!--```{r}

# selectInput widget
selectInput(
  "organ_race",
  label = h3("Select race of organ donor"),
  choices = organ_race, selected = "Kidney")

# selectInput widget
selectInput(
  "organ_age",
  label = h3("Select age of organ donor"),
  choices = organ_gender, selected = "Kidney")

# selectInput widget
selectInput(
  "organ_gender",
  label = h3("Select gender of organ donor"),
  choices = organ_gender, selected = "Kidney")
```--->

Row {.tabset}
-----------------------------------------------------------------------

### Patient Characteristics
<div style='display:flex; flex-direction:row; justify-content:space-evenly; align-items:center;'>
<div>
```{r}
fig_a = 
  df_all_demographics %>%
    rename(Race = race_category_percent, Zipcode = zipcode) %>%
    mutate(race_category =
             str_replace(race_category, "african_american_allc2", "African American"),
           race_category =
             str_replace(race_category, "asian_allc2", "Asian"),
           race_category =
             str_replace(race_category, "hispanic_latino_allc2", "Hispanic or Latino"),
           race_category =
             str_replace(race_category, "race_other_allc2", "Other"),
           race_category = str_replace(race_category, "race_unknown_allc2", "Unknown"),
           race_category = str_replace(race_category, "white_allc2", "White")) %>%
    # filter(organ_race == input$organ_race) %>%
    plot_ly(x = ~Zipcode, y = ~Race, 
            type = "scatter", mode = "markers",
            alpha = 0.9, color = ~race_category, colors = "viridis")
fig_a  %>% 
  layout(autosize = F, width = 550, height = 400,
         xaxis = list(title = 'Zip Code'),
         yaxis = list(title = 'Race/Ethnicity'),
         legend = list(title=list(text='<b> Race/Ethnicity </b>')))

```
</div>
<div>
```{r}
fig_b = 
  df_all_age  %>%
    mutate(
      age_category = str_replace(age_category, "age_2_allc2", "Less Than 2 Years"),
      age_category = str_replace(age_category, "age_2_11_allc2", "2 to 11 Years"),
      age_category = str_replace(age_category, "age_12_17_allc2", "12 to 17 Years"),
      age_category = str_replace(age_category, "age_18_34_allc2", "18 to 34 Years"),
      age_category = str_replace(age_category,"age_35_49_allc2", "35 to 49 Years"),
      age_category = str_replace(age_category, "age_50_64_allc2", "50 to 64 Years"),
      age_category = str_replace(age_category, "age_65_69_allc2", "65 to 69 Years"),
      age_category = str_replace (age_category, "age_70_allc2", "More Than 70 Years"),
      age_category = factor(age_category, 
                            levels = c("Less Than 2 Years","2 to 11 Years",
                                       "12 to 17 Years", "18 to 34 Years", 
                                       "35 to 49 Years", "50 to 64 Years",
                                       "65 to 69 Years", "More Than 70 Years"))) %>%
    rename(Age_Group = age_category_percent, Zipcode = zipcode) %>%
    # filter(organ_age == input$organ_age) %>%
    plot_ly(x = ~Zipcode, y = ~Age_Group, 
            type = "scatter", mode = "markers",
            alpha = 0.9, color = ~age_category, colors = "viridis")
fig_b %>%  
  layout(autosize = F, width = 550, height = 400,
         xaxis = list(title = 'Zip Code'),
         yaxis = list(title = 'Age Group'),
         legend = list(title=list(text='<b> Age Group </b>')))
```
</div>
</div>
<div style='display:flex; flex-direction:row; justify-content:space-evenly; align-items:center;'>
<div>
```{r}
fig_c = 
  df_all_gender %>%
    rename(Gender = gender_category_percent, Zipcode = zipcode) %>%
    mutate(gender_category = str_replace(gender_category, "female_allc2", "Female"),
           gender_category = str_replace(gender_category, "male_allc2", "Male")) %>%
    # filter(organ_gender == input$organ_gender) %>%
    plot_ly(x = ~Zipcode, y = ~Gender, 
            type = "scatter", mode = "markers",
            alpha = 0.9, color = ~gender_category, colors = "viridis")
fig_c %>%  
  layout(autosize = F, width = 550, height = 400,
         xaxis = list(title = 'Zip Code'),
         yaxis = list(title = 'Gender'),
         legend = list(title=list(text='<b> Gender </b>')))
```
</div>
<div>
```{r}
fig_d = 
  df_all_blood_type %>%
    rename("Blood Type" = blood_type_category_percent, Zipcode = zipcode) %>%
    mutate(blood_type_category = 
             str_replace(blood_type_category, "blood_type_a_allc2", "A"),
           blood_type_category = 
             str_replace(blood_type_category, "blood_type_b_allc2", "B"),
           blood_type_category = 
             str_replace(blood_type_category, "blood_type_o_allc2", "O"),
           blood_type_category = 
             str_replace(blood_type_category, "blood_type_ab_allc2", "AB"),
           blood_type_category = 
             str_replace(blood_type_category, "blood_type_unknown_allc2", "Unknown"),
           blood_type_category = 
             factor(blood_type_category, levels = c("A","B","O", "AB","Unknown"))) %>%
    # filter(organ_gender == input$organ_gender) %>%
    plot_ly(x = ~Zipcode, y = ~`Blood Type`, 
            type = "scatter", mode = "markers",
            alpha = 0.9, color = ~blood_type_category, colors = "viridis")
fig_d %>%  
  layout(autosize = F, width = 550, height = 400,
         xaxis = list(title = 'Zip Code'),
         yaxis = list(title = 'Blood Type'),
         legend = list(title=list(text='<b> Blood Type </b>')))
```
</div>
</div>

### Transplant Outcomes
<div style='display:flex; flex-direction:row; justify-content:space-evenly; align-items:center;'>
<div>
```{r}
fig_a = 
  df_all_demographics %>%
    rename(Race = race_category_percent, Zipcode = zipcode) %>%
    mutate(race_category =
             str_replace(race_category, "african_american_allc2", "African American"),
           race_category =
             str_replace(race_category, "asian_allc2", "Asian"),
           race_category =
             str_replace(race_category, "hispanic_latino_allc2", "Hispanic or Latino"),
           race_category =
             str_replace(race_category, "race_other_allc2", "Other"),
           race_category = str_replace(race_category, "race_unknown_allc2", "Unknown"),
           race_category = str_replace(race_category, "white_allc2", "White")) %>%
    # filter(organ_race == input$organ_race) %>%
    plot_ly(x = ~Zipcode, y = ~Race, 
            type = "scatter", mode = "markers",
            alpha = 0.9, color = ~race_category, colors = "viridis")
fig_a  %>% 
  layout(autosize = F, width = 550, height = 400,
         xaxis = list(title = 'Zip Code'),
         yaxis = list(title = 'Race/Ethnicity'),
         legend = list(title=list(text='<b> Race/Ethnicity </b>')))

```
</div>
<div>
```{r}
fig_b = 
  df_all_age  %>%
    mutate(
      age_category = str_replace(age_category, "age_2_allc2", "Less Than 2 Years"),
      age_category = str_replace(age_category, "age_2_11_allc2", "2 to 11 Years"),
      age_category = str_replace(age_category, "age_12_17_allc2", "12 to 17 Years"),
      age_category = str_replace(age_category, "age_18_34_allc2", "18 to 34 Years"),
      age_category = str_replace(age_category,"age_35_49_allc2", "35 to 49 Years"),
      age_category = str_replace(age_category, "age_50_64_allc2", "50 to 64 Years"),
      age_category = str_replace(age_category, "age_65_69_allc2", "65 to 69 Years"),
      age_category = str_replace (age_category, "age_70_allc2", "More Than 70 Years"),
      age_category = factor(age_category, 
                            levels = c("Less Than 2 Years","2 to 11 Years",
                                       "12 to 17 Years", "18 to 34 Years", 
                                       "35 to 49 Years", "50 to 64 Years",
                                       "65 to 69 Years", "More Than 70 Years"))) %>%
    rename(Age_Group = age_category_percent, Zipcode = zipcode) %>%
    # filter(organ_age == input$organ_age) %>%
    plot_ly(x = ~Zipcode, y = ~Age_Group, 
            type = "scatter", mode = "markers",
            alpha = 0.9, color = ~age_category, colors = "viridis")
fig_b %>%  
  layout(autosize = F, width = 550, height = 400,
         xaxis = list(title = 'Zip Code'),
         yaxis = list(title = 'Age Group'),
         legend = list(title=list(text='<b> Age Group </b>')))
```
</div>
</div>
<div style='display:flex; flex-direction:row; justify-content:space-evenly; align-items:center;'>
<div>
```{r}
fig_c = 
  df_all_gender %>%
    rename(Gender = gender_category_percent, Zipcode = zipcode) %>%
    mutate(gender_category = str_replace(gender_category, "female_allc2", "Female"),
           gender_category = str_replace(gender_category, "male_allc2", "Male")) %>%
    # filter(organ_gender == input$organ_gender) %>%
    plot_ly(x = ~Zipcode, y = ~Gender, 
            type = "scatter", mode = "markers",
            alpha = 0.9, color = ~gender_category, colors = "viridis")
fig_c %>%  
  layout(autosize = F, width = 550, height = 400,
         xaxis = list(title = 'Zip Code'),
         yaxis = list(title = 'Gender'),
         legend = list(title=list(text='<b> Gender </b>')))
```
</div>
<div>
```{r}
fig_d = 
  df_all_blood_type %>%
    rename("Blood Type" = blood_type_category_percent, Zipcode = zipcode) %>%
    mutate(blood_type_category = 
             str_replace(blood_type_category, "blood_type_a_allc2", "A"),
           blood_type_category = 
             str_replace(blood_type_category, "blood_type_b_allc2", "B"),
           blood_type_category = 
             str_replace(blood_type_category, "blood_type_o_allc2", "O"),
           blood_type_category = 
             str_replace(blood_type_category, "blood_type_ab_allc2", "AB"),
           blood_type_category = 
             str_replace(blood_type_category, "blood_type_unknown_allc2", "Unknown"),
           blood_type_category = 
             factor(blood_type_category, levels = c("A","B","O", "AB","Unknown"))) %>%
    # filter(organ_gender == input$organ_gender) %>%
    plot_ly(x = ~Zipcode, y = ~`Blood Type`, 
            type = "scatter", mode = "markers",
            alpha = 0.9, color = ~blood_type_category, colors = "viridis")
fig_d %>%  
  layout(autosize = F, width = 550, height = 400,
         xaxis = list(title = 'Zip Code'),
         yaxis = list(title = 'Blood Type'),
         legend = list(title=list(text='<b> Blood Type </b>')))
```
</div>
</div>
### Organ Offer Acceptance Practices
<div style='display:flex; flex-direction:row; justify-content:space-evenly; align-items:center;'>
<div>
```{r}
fig_a = 
  df_all_demographics %>%
    rename(Race = race_category_percent, Zipcode = zipcode) %>%
    mutate(race_category =
             str_replace(race_category, "african_american_allc2", "African American"),
           race_category =
             str_replace(race_category, "asian_allc2", "Asian"),
           race_category =
             str_replace(race_category, "hispanic_latino_allc2", "Hispanic or Latino"),
           race_category =
             str_replace(race_category, "race_other_allc2", "Other"),
           race_category = str_replace(race_category, "race_unknown_allc2", "Unknown"),
           race_category = str_replace(race_category, "white_allc2", "White")) %>%
    # filter(organ_race == input$organ_race) %>%
    plot_ly(x = ~Zipcode, y = ~Race, 
            type = "scatter", mode = "markers",
            alpha = 0.9, color = ~race_category, colors = "viridis")
fig_a  %>% 
  layout(autosize = F, width = 550, height = 400,
         xaxis = list(title = 'Zip Code'),
         yaxis = list(title = 'Race/Ethnicity'),
         legend = list(title=list(text='<b> Race/Ethnicity </b>')))

```
</div>
<div>
```{r}
fig_b = 
  df_all_age  %>%
    mutate(
      age_category = str_replace(age_category, "age_2_allc2", "Less Than 2 Years"),
      age_category = str_replace(age_category, "age_2_11_allc2", "2 to 11 Years"),
      age_category = str_replace(age_category, "age_12_17_allc2", "12 to 17 Years"),
      age_category = str_replace(age_category, "age_18_34_allc2", "18 to 34 Years"),
      age_category = str_replace(age_category,"age_35_49_allc2", "35 to 49 Years"),
      age_category = str_replace(age_category, "age_50_64_allc2", "50 to 64 Years"),
      age_category = str_replace(age_category, "age_65_69_allc2", "65 to 69 Years"),
      age_category = str_replace (age_category, "age_70_allc2", "More Than 70 Years"),
      age_category = factor(age_category, 
                            levels = c("Less Than 2 Years","2 to 11 Years",
                                       "12 to 17 Years", "18 to 34 Years", 
                                       "35 to 49 Years", "50 to 64 Years",
                                       "65 to 69 Years", "More Than 70 Years"))) %>%
    rename(Age_Group = age_category_percent, Zipcode = zipcode) %>%
    # filter(organ_age == input$organ_age) %>%
    plot_ly(x = ~Zipcode, y = ~Age_Group, 
            type = "scatter", mode = "markers",
            alpha = 0.9, color = ~age_category, colors = "viridis")
fig_b %>%  
  layout(autosize = F, width = 550, height = 400,
         xaxis = list(title = 'Zip Code'),
         yaxis = list(title = 'Age Group'),
         legend = list(title=list(text='<b> Age Group </b>')))
```
</div>
</div>
<div style='display:flex; flex-direction:row; justify-content:space-evenly; align-items:center;'>
<div>
```{r}
fig_c = 
  df_all_gender %>%
    rename(Gender = gender_category_percent, Zipcode = zipcode) %>%
    mutate(gender_category = str_replace(gender_category, "female_allc2", "Female"),
           gender_category = str_replace(gender_category, "male_allc2", "Male")) %>%
    # filter(organ_gender == input$organ_gender) %>%
    plot_ly(x = ~Zipcode, y = ~Gender, 
            type = "scatter", mode = "markers",
            alpha = 0.9, color = ~gender_category, colors = "viridis")
fig_c %>%  
  layout(autosize = F, width = 550, height = 400,
         xaxis = list(title = 'Zip Code'),
         yaxis = list(title = 'Gender'),
         legend = list(title=list(text='<b> Gender </b>')))
```
</div>
<div>
```{r}
fig_d = 
  df_all_blood_type %>%
    rename("Blood Type" = blood_type_category_percent, Zipcode = zipcode) %>%
    mutate(blood_type_category = 
             str_replace(blood_type_category, "blood_type_a_allc2", "A"),
           blood_type_category = 
             str_replace(blood_type_category, "blood_type_b_allc2", "B"),
           blood_type_category = 
             str_replace(blood_type_category, "blood_type_o_allc2", "O"),
           blood_type_category = 
             str_replace(blood_type_category, "blood_type_ab_allc2", "AB"),
           blood_type_category = 
             str_replace(blood_type_category, "blood_type_unknown_allc2", "Unknown"),
           blood_type_category = 
             factor(blood_type_category, levels = c("A","B","O", "AB","Unknown"))) %>%
    # filter(organ_gender == input$organ_gender) %>%
    plot_ly(x = ~Zipcode, y = ~`Blood Type`, 
            type = "scatter", mode = "markers",
            alpha = 0.9, color = ~blood_type_category, colors = "viridis")
fig_d %>%  
  layout(autosize = F, width = 550, height = 400,
         xaxis = list(title = 'Zip Code'),
         yaxis = list(title = 'Blood Type'),
         legend = list(title=list(text='<b> Blood Type </b>')))
```
</div>
</div>
<!-- Search the Data Repository -->
<!-- ======================================================================= -->

<!-- The **SRTR Data Repository** provides users with the ability to search and copy, print, or download results for further study. Users may filter by a single column or query all columns simultaneously using the search bar. -->

<!-- ```{r} -->
<!-- # this is just a placeholder; we will replace this with another table -->
<!-- datatable(df_all_demographics %>% -->
<!--             select(-ctr_ty, -`...1`)%>% -->
<!--             rename(Site = entire_name, -->
<!--                    `Center Code` = ctr_cd, -->
<!--                    Organ = org, -->
<!--                    `Zip code` = zipcode, -->
<!--                    Race = race_category, -->
<!--                    `Race Category Percent` = race_category_percent), -->
<!--           extensions = c('Buttons'), -->
<!--           options =  -->
<!--             list(scrollY = 650,  -->
<!--                  scrollX = 500,  -->
<!--                  deferRender = TRUE, -->
<!--                  pageLength = 25, -->
<!--                  # scroller = FALSE, -->
<!--                  # paging = TRUE, -->
<!--                  dom = 'Bfrtip', -->
<!--                  buttons = list('copy', 'print',  -->
<!--                            list(extend = 'collection', -->
<!--                                 buttons = c('csv', 'excel', 'pdf'), -->
<!--                                 text = 'Download'))), -->
<!--           filter = 'top', -->
<!--           escape = FALSE) -->
<!--           # caption = 'The SRTR Data Repository provides users with the ability -->
<!--           # to search and copy, print, or download results for further study.  -->
<!--           # Users may filter by a single column or search all columns  -->
<!--           # simultaneously.') -->
<!-- ``` -->

<!-- Additional Information -->
<!-- ======================================================================= -->

<!-- Column -->
<!-- ----------------------------------------------------------------------- -->

<!-- ### Background -->

<!-- **Motivation for this project:**     -->
<!-- Kidney transplantation is the preferred treatment for End Stage Kidney Disease (ESKD). Nonetheless, due to a severe donor organ shortage, only 22,393 out of more than 785,000 patients with ESKD received kidney transplants in the United States (US) in 2018.^1^ Given the limited supply, kidney transplant centers can be very selective in who qualifies as a kidney transplant candidate. Transplant centers and surgeons often make subjective decisions regarding which deceased donor kidneys are acceptable for transplant in a given patient. This process can lack transparency and impact whether a patient receives a kidney transplant prior to dying or removal from the waiting list due to severity of illness. Accordingly, large practice variation is possible among the 200+ kidney transplant centers across the US. While center-level summary data on transplants and waitlist candidates are publicly available, this information is primarily presented as individualized snapshot reports that do not lend themselves to direct comparison across sites over time. Given that patients may choose where to waitlist, our aim is to analyze data comparing transplantation center practices and develop a dashboard to present these findings to the public. -->

<!-- **Data sources:**    -->
<!-- The Scientific Registry of Transplant Recipients (SRTR) takes national registry data on all organ donors, transplant candidates, and transplant recipients in the US to produce biannual [Program-Specific Reports](https://www.srtr.org/reports/program-specific-reports/) (PSR). Our project will utilize center-level data on waitlisted patients and patients in receipt of transplants, aggregated demographics, transplant outcomes, and organ offer acceptance practices. The PSR data is archived and publicly available for download in Excel format from the SRTR website with drop-down menus for organ and time period. These reports date back to July 2012 with offer acceptance data available starting July 2017. There are 238 rows of transplant center data in the most recent data file, organized across many different sheets by topic, each with tens to hundreds of columns. -->

<!-- **References**    -->
<!-- 1. *United States Renal Data System. 2020 USRDS Annual Data Report: Epidemiology of kidney disease in the United States. National Institutes of Health, National Institute of Diabetes and Digestive and Kidney Diseases, Bethesda, MD, 2020.* -->

<!-- Column -->
<!-- ----------------------------------------------------------------------- -->

<!-- ### How to use the site -->

<!-- **Dashboard:**    -->
<!-- [Details regarding elements of the dashboard] -->

<!-- **Repository:**    -->
<!-- [Details regarding elements of the repository] -->


<!-- Column  {data-width=150} -->
<!-- ----------------------------------------------------------------------- -->

<!-- ### Study Team: -->

<!-- <center> -->

<!-- **Kristin King**    -->
<!-- (kk3154)    -->
<!-- ![*Kristen King*](./img/King_Kristin.jpeg){width=75%} -->

<!-- **Harry Reyes**     -->
<!-- (hr2479)    -->
<!-- ![*Harry Reyes*](./img/Reyes_Harry.png){width=75%} -->

<!-- **Lauren Richter**     -->
<!-- (lr2854)    -->
<!-- ![*Lauren Richter*](./img/Richter_Lauren.jpeg){width=75%}  -->

<!-- **Matthew Spotnitz**     -->
<!-- (mes2165)    -->
<!-- ![*Matthew Spotnitz*](./img/Spotnitz_Matthew.jpeg){width=75%}  -->

<!-- </center> -->